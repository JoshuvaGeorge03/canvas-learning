<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title>Canvas Meme Generator</title>
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<meta
			name="description"
			content="This is canvas based simple meme generator" />
		<meta name="author" content="Joshuva George. M" />
		<meta property="og:title" content="Canvas Meme Generator" />
		<meta
			property="og:description"
			content="This is canvas based simple meme generator" />
		<meta property="og:type" content="website" />
		<meta property="og:url" content="" />
		<meta property="og:image" content="" />
		<link rel="icon" type="image/ico" href="meme.ico" />
		<link rel="stylesheet" type="text/css" href="index.css" />
	</head>

	<body>
		<main class="container">
			<section class="canvasControlForm">
				<form
					name="canvasControlForm"
					action="#"
					method="GET"
					id="canvasControlForm">
					<fieldset>
						<legend>control canvas form</legend>
						<div>
							<input
								type="radio"
								name="canvasControlState"
								id="myBasicShapes"
								value="basicShape"
								checked />
							<label for="myBasicShapes">My Basic Shapes</label>
							<input
								type="radio"
								name="canvasControlState"
								id="interactiveShapes"
								value="interactiveShapes" />
							<label for="interactiveShapes">interactive shapes drawing</label>
							<input
								type="radio"
								name="canvasControlState"
								id="imageDraw"
								value="imageDraw" />
							<label for="imageDraw">load image onto canvas</label>
							<input
								type="radio"
								name="canvasControlState"
								id="videoDraw"
								value="videoDraw" />
							<label for="videoDraw">load video onto canvas</label>
							<input
								type="radio"
								name="canvasControlState"
								id="imageFilter"
								value="imageFilter" />
							<label for="imageFilter">Image filter</label>
							<input
								type="radio"
								name="canvasControlState"
								id="vidoFilter"
								value="vidoFilter" />
							<label for="vidoFilter">Video filter</label>
							<input
								type="radio"
								name="canvasControlState"
								id="memeGenerator"
								value="memeGenerator" />
							<label for="memeGenerator">Generate memes</label>
						</div>
					</fieldset>
				</form>
			</section>
			<template id="memeGenerationTemplate">
				<section id="memeInputSection">
					<form
						name="memeGeneratorForm"
						id="memeGeneratorForm"
						action="#"
						method="GET"
						enctype="multipart/form-data">
						<div>
							<label for="memeFile">Select Meme Image</label>
							<input
								type="file"
								name="memeFile"
								id="memeFile"
								accept="image/*" />
						</div>
					</form>
					<hr style="margin-block-end: 2rem" />
					<form
						name="memeTextInputForm"
						id="memeTextInputForm"
						action="#"
						method="post"
						enctype="application/x-www-form-urlencoded"
						target="_blank">
						<div>
							<label for="toptext">enter meme top text</label>
							<input
								id="toptext"
								name="toptext"
								type="text"
								placeholder="describe meme" />
						</div>
						<div>
							<label>
								Enter meme bottom text
								<input
									id="bottomtext"
									name="bottomtext"
									type="text"
									placeholder="describe meme" />
							</label>
						</div>
					</form>
				</section>
			</template>

			<canvas id="drawingArea"></canvas>
		</main>

		<script type="module">
			import { getEleById } from './utils.js';
			globalThis.drawingArea = getEleById('drawingArea');
			globalThis.drawingAreaContext = drawingArea.getContext('2d');

			function setDrawingAreaOfCanvas() {
				const viewportSize = {
					width: document.documentElement.clientWidth,
					height: document.documentElement.clientHeight
				};
				// drawingArea.width = viewportSize.width;
				// drawingArea.height = viewportSize.height;
			}

			setDrawingAreaOfCanvas();
		</script>
		<script type="module">
			import { getEleById, addListener, compose } from './utils.js';

			function fillRect(x, y, width, height) {
				drawingAreaContext.fillRect(x, y, width, height);
			}

			function strokeRect(x, y, width, height) {
				drawingAreaContext.strokeRect(x, y, width, height);
			}

			function clearRect(x, y, width, height) {
				drawingAreaContext.clearRect(x, y, width, height);
			}

			function getCenterPointOfCanvas() {
				const width = drawingArea.width;
				const centerInXaxis = Math.round(width / 2);
				const yAxis = 100;
				return [centerInXaxis, yAxis];
			}

			function getCanvasMemeText() {
				return 'Joshuva Rocks';
			}

			function toUpperCase(text) {
				return text.toUpperCase();
			}

			(function init() {
				/// learned basic drawing commands

				drawingAreaContext.fillStyle = 'purple';
				fillRect(10, 10, 100, 100);

				drawingAreaContext.fillStyle = 'black';
				fillRect(110, 110, 50, 40);

				drawingAreaContext.strokeStyle = 'lightblue';
				strokeRect(70, 150, 40, 100);

				clearRect(130, 130, 20, 20);

				drawingAreaContext.beginPath();
				drawingAreaContext.moveTo(110, 250);
				drawingAreaContext.lineTo(110, 290);
				drawingAreaContext.lineTo(125, 275);
				drawingAreaContext.lineTo(110, 250);

				drawingAreaContext.fill();

				const [centerX, centerY] = getCenterPointOfCanvas();
				drawingAreaContext.font = '36pt impact';
				drawingAreaContext.fillStyle = 'white';
				drawingAreaContext.textAlign = 'center';
				const canvasText = compose(toUpperCase, getCanvasMemeText)();
				drawingAreaContext.fillText(canvasText, centerX, centerY);
				drawingAreaContext.strokeStyle = 'black';
				drawingAreaContext.strokeText(canvasText, centerX, centerY);
			})();
		</script>
		<script type="module" src="./index.js"></script>
	</body>
</html>
